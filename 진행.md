Test 작성 계획

작업을 띄엄띄엄 하다보니 내가 어디까지 했는지, 어디부터 해야하는지 작업흐름을 찾기가 쉽지않음, 체크리스트로 만들어서 관리해야겠음

데드라인이 없으니 언제 끝날지 모르고 세월아 네월아임 노션에 마감시간을 공지해야겠음

테스트를 실패하거나 성공하는 두 가지 경우의 django app을 짜서 테스트 진행한 후 진행사항 체크

발생한 문제점 - module api에서 주는 정보가 진짜 쥐똥만큼 줌 

해결 방안 - 스크린샷을 같이 제공한다. 통과하지 못한테스트에 대해서 정보를 조금 얻을 수 있을 듯?

스크린샷 제공 시 이미지 제공할 수 있는 api 만들어야 됨

추가로 테스트를 굉장히 분리해서 요소가 존재하는지 여부 부터 테스트를 해야 될 듯 하다.

테스트가 세세할 수록 학생들이 체크하기가 좋다.

크게 모든 요소 체크하는 거, 기능 체크하는 거

탁희형이 소개해준거는 github이라 사용이 힘들다 테스트하려면 자체로 개발해야됨

## 작업 일지

- 5.6 
  - create에서 요소 존재여부 체크하는 테스트부터 만들어야 됨.
  - title 미입력 테스트 성공
  - movie-title 미입력 테스트 삭제 해야됨.
  
- 5.9
  - `beforeEach`가 아니라 `before`로 테스트마다 접속 한 번만 하도록 함
  - 발생한 문제, - 요청 한번에 하나 밖에 처리 못 함. 요청 겹치면 뒤에 요청한 사람은 계속 기다려야됨. 그리고 안그래도 테스트 오래걸림. api와 테스트를 분리해서 나눈다면?

- 5.17

  - 일단 4.8 마무리하자 - 아 아마 지인 방문으로 작업일지 정리하는 것도 까먹었을 듯,

- 5.23

  - 일단 명세를 최소화 해서 테스트 코드 작성은 마무리함

  - 마무리 하면서 `textarea` 텍스트 `trim` 된다는 거 처음 인지했다. 템플릿 리터럴로 할 때 아래와 같은 코드에서 개행문자가 생기니까 테스트할 때 조심해야될 듯

    ```javascript
    const paragraph = 
    `
    이런식으로 여러 줄 문단을 작성하게 되면
    맨 마지막에 줄 바꿈 문자열이 들어가게 된다.
    `
    ```

- 5.25

  - 테스트 api를 분리하기로 했는데, 처음에 어떻게 해야 할 지 감을 못 잡아서 좀 헤맸다. python의 `if __name__==__main__` 과 같은 역할을 해줄 js코드를 찾아서 모듈로 임포트 됐을 때랑 메인으로 실행할 경우를 분리하려고 했는데, cypress가 실행하는 거라 그런지 말을 안들어 처먹었다. 

    cypress를 실행하는 모듈api에서 env var를 넘겨줄 수 있어서 그거 + 스위치로 해결해보려고 했는데, 일단 성공했다. 그런데 예상보다 실행시간이 많이 줄지는 않는다. 테스트를 실패할 경우 훨씬 오래 걸리기 때문에, 실제 사용할 수 있을 지 모르겠다. 특히 아직 배포해서 테스트 해본 것도 아니기 때문에... 일단 두시간? 정도 안에 생각한대로 분리 성공했다는 것만 해도 잘했다.

  - 이제는 ui를 좀 고칠 때가 왔다. 테스트 별 분리 정도는 아무래도 해줘야 한다.

  - 요즘 생산성이 많이 높아진 것 같다. 기분이 좋다.

- 5.30

  - 테스트 버튼과 테스트 결과를 묶어서 컴포넌트로 분리했다. 열고 닫을 수 있게 `react-collapsible`을 쓰려고했는데, 뭔가 잔 버그가 많은지 아니면 내가 잘 못다루는 것인지, 공부도 할 겸 바닐라로 만들어 보기로 했다. 지금 할 일에서 우선순위로는 일단 밀리는 것 같다.
  - 먼저 해야할 거 순위를 정해보면 - ui에서 describe 별로 계층 구조로 보이도록 표시하는 거? collapse 는 그다음 일인 것 같다.
  - 그리고 다른 테스트를 하루만에 빠르게 작성가능 한 지 여부를체크해야함.
  - `Array.from()` : 유사배열객체를 받아서 배열로 리턴해주는 메소드

- 5.31

  - Describe 별로 계층 구조로 보이는 거 - 역시 생각이 안 날 때는, 가장 무식한 방법으로 코딩하고 점차 고쳐 나가면 된다.
  - 테스트 통과여부 아이콘으로 구축
  - React 에서 `<StateIcon/>` 과 같이 쓰려면 `StateIcon` 은 함수여야 한다. 그냥 jsx 객체를 쓸 때는 `{StateIcon}` 과 같이 쓰면 된다. 어느 게 더 좋은 방법인지는 모르겠슴.
  - 서버 요청보내고 응답 받는 시간이 너무 오래걸려서 일단 개발용으로 데이터를 몇 개 받아서 .json 파일로 만든 다음에 불러와서 사용하는 게 프론트 개발 때는 편할 듯.

- 6.7

  - 결국 6월로 넘어왔다.
  - e2e테스트는 세부적인 백엔드 구현사항을 체크할 수는 없다. 학생들 개발 도움용으로 써야하는가?

### 4.8 명세

- 버튼
  - 작성 페이지
    - 타이틀 인풋 `input[name="title"]
    - 랭크 인풋 `input[name="rank"]`
    - 콘텐트 텍스트에어리어 `textarea[name="content"]`
    - 작성하기 `#submit-btn`
    - 뒤로가기 `#back-btn`
  - 전체리뷰
    - 타이틀 링크 `.title`
  - 상세 조회 페이지
    - 타이틀 태그 `#title`
    - 무비 타이틀 `#movie-title`
    - 랭크 `#rank`
    - 콘텐트 `#content`
    - 수정버튼 `#edit-btn`
    - 삭제버튼 `#delete-btn`
  - 전체 목록 조회 링크 `#home`
  - 리뷰 작성페이지 링크 `#create`
  
- [x] 공통 테스트, 네비게이션 바에서 전체 목록 조회 페이지와 리뷰 작성페이지 이동 가능한 링크 존재?

- 데이터 생성
  - [x] 각 요소가 존재하는 지 부터 체크 해야됨.
  - [x] 각 데이터 안 넣었을 때 테스트도 시행
  - [x] 100자 이상의 타이틀 입력
  - [ ] 작성 후 디테일 페이지로 이동, 디테일 페이지에 작성된 내용과 일치여부 확인
  
- 전체 리뷰 조회 페이지
  - [x] 목록에 방금 만든 데이터가 존재?
  - [x] 타이틀을 클릭시 해당 디테일 페이지로 이동?
  
- 상세 조회 페이지
  - [x] 클릭한 타이틀과 같은 타이틀이 나오는가?
  - [x] 적당한 id를 통해 404 status를 확인할 수 있는가?